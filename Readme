# Lead Management API & WordPress Form

## Overview
Proyek ini adalah sistem **Lead Management API** berbasis **Laravel** yang dilindungi oleh **Bearer Token** statis dan digunakan untuk menangani prospek (leads). Formulir di **WordPress** digunakan untuk mengumpulkan data prospek dan mengirimkannya ke API Laravel.

## Teknologi yang Digunakan
- **Laravel** (API Backend)
- **WordPress** (Frontend & Formulir Prospek)
- **Postgree** (Database)
- **Docker & Docker Compose** (Deployment)

##  Cara Menjalankan Proyek dengan Docker Compose
### 1Ô∏è **Clone Repository**
```sh
git clone https://github.com/username/repository.git
cd repository
```

### 2Ô∏è **Jalankan Docker Compose**
docker-compose up -d --build
```

### 3Ô∏è **Akses Aplikasi**
- **API Laravel:** [http://localhost:8000](http://localhost:8000)
- **WordPress:** [http://localhost:8081](http://localhost:8081)

##  API Authentication (Bearer Token)
Semua request ke API harus menggunakan **Bearer Token** statis:
```sh
Authorization: Bearer lead-management-token-2025
```

##  API Endpoints
| Method | Endpoint | Deskripsi |
|--------|---------|-----------|
| `POST` | `/api/leads` | Menyimpan lead baru |
| `GET` | `/api/leads` | Menampilkan semua leads |
| `GET` | `/api/leads/{id}` | Menampilkan lead berdasarkan ID |
| `PUT` | `/api/leads/{id}` | Mengupdate lead berdasarkan ID |
| `DELETE` | `/api/leads/{id}` | Menghapus lead berdasarkan ID |

### **Contoh Request via cURL**
```sh
curl --location 'http://localhost:8000/api/leads' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer lead-management-token-2025' \
--data-raw '{
    "name": "Ijun Wahyudin",
    "email": "ijun@example.com",
    "phone": "08123456789",
    "source": "Tiktok",
    "message": "I am interested"
}'
```

##  Formulir WordPress
Form ini digunakan untuk menangkap prospek dan mengirimkannya ke API Laravel.

### **Fitur Formulir**
‚úÖ **Validasi:** Nama, Email, dan Nomor Telepon wajib diisi.<br>
‚úÖ **Otomatis Mengambil Sumber (Source) dari UTM Parameter di URL**<br>
‚úÖ **Menampilkan pesan sukses/gagal setelah submit**

### **Cara Menggunakan Form di WordPress**
1. Tambahkan shortcode berikut di halaman WordPress:
   ```sh
   [lead_capture_form]
   ```
2. Pastikan halaman diakses dengan UTM Parameter, misalnya:
   ```sh
   http://localhost:8081?utm_campaign=FacebookAds
   ```
3. Jika berhasil, field "Sumber" otomatis akan terisi dengan "FacebookAds".

##  Migrasi Database Laravel
Jika perlu menjalankan ulang database:
```sh
docker-compose exec app php artisan migrate --seed
```

## üõ†Ô∏è Troubleshooting
Jika ada kendala saat menjalankan:
1. **Cek log Laravel**:
   ```sh
   docker-compose exec app tail -f storage/logs/laravel.log
   ```
2. **Pastikan container berjalan**:
   ```sh
   docker ps
   ```
3. **Hentikan & Jalankan ulang**:
   ```sh
   docker-compose down && docker-compose up -d --build
   ```
